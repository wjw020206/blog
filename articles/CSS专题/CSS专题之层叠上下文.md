# CSS专题之层叠上下文



## 前言

> 石匠敲击石头的第 15 次

在平常开发的时候，有时候会遇到使用 `z-index` 调整元素层级没有效果的情况，究其原因还是因为对层叠上下文不太了解，所以打算写一篇文章来梳理一下，如果哪里写的有问题欢迎指出，不胜感激。



## 什么是层叠上下文

层叠上下文（**Stacking Context**）是 HTML 中的三维概念，它决定了元素在 **Z 轴（垂直于电脑屏幕的方向）上**的显示顺序。简单来说，**层叠上下文是浏览器用来组织元素 Z 轴方向堆叠顺序的一个独立的 “视觉区域” 或 “作用域”**。

![image-20250525130425840](images/image-20250525130425840.png)

层叠上下文的概念有点类似于块级格式化上下文（BFC），都是在特定条件下由元素创建的独立作用区域，并且区域内遵循各自的规则，**但它作用在视觉层级（`z-index`）而非布局流**。



## 什么是层叠水平

在一个层叠上下文中，**层叠水平（Stacking Level，也叫层叠等级）** 用于确定其**子元素**在 Z 轴方向上的显示优先级，简单来说，**层叠水平决定了同一层叠上下文内的元素谁在上、谁在下**。

**⚠️ 注意：** 

- **元素的层叠水平是由其所属的层叠上下文来决定的**，也就是说**层叠水平的比较只有在同一个层叠上下文中才有意义**，所以不同层叠上下文之间的元素不会互相影响
- 某些情况下（Flex 子元素和定位元素） `z-index` 确实可以影响元素的层叠水平，但层叠水平**不等于** `z-index`，**所有元素都有层叠水平**



##  什么是层叠顺序

层叠上下文和层叠顺序这两个终究只是抽象的概念，但元素具体是按照什么规则层叠的，这就不得不提**层叠顺序（Stacking Order）**。

简单来说，层叠顺序就是指当多个元素在 Z 轴方向发生**重叠**时，**浏览器决定哪些元素显示在上、哪些元素被遮挡**的一套规则。

![image-20250526082022034](images/image-20250526082022034.png)

**⚠️ 注意：**

- 





